create database insurance_c;
use insurance_c;
create table insurance_c.person(driver_id varchar(5),name varchar(10),address varchar(20),primary key(driver_id));
desc insurance_c.person;
create table insurance_c.car(reg_no varchar(5),model varchar(10),year int,primary key(reg_no));
desc insurance_c.car;
create table insurance_c.accident(report_no int,accident_date date,location varchar(20),primary key(report_no));
desc insurance_c.accident;
create table insurance_c.owns(driver_id varchar(5),reg_no varchar(5),foreign key (driver_id) references person(driver_id),foreign key (reg_no) references car(reg_no));
create table insurance_c.participated(driver_id varchar(5),reg_no varchar(5),report_no int,damage_amt int,primary key(driver_id,reg_no,report_no),foreign key (driver_id) references person(driver_id),foreign key (reg_no) references car(reg_no),foreign key(report_no) references accident(report_no));
insert into person values("A01","RICHARD","srinivas nagar");
insert into person values("A02","PRADEEP","rajaji nagar");
insert into person values("A03","SMITH","ashok nagar");
insert into person values("A04","VENU","n r colony");
insert into person values("A05","JOHN","hanumanth nagar");
insert into car values("KA250","INDICA",1990);
insert into car values("KA181","LANCER",1957);
insert into car values("KA477","TOYOTA",1998);
insert into car values("KA408","HONDA",2008);
insert into car values("KA702","AUDI",2005);
select * from person;
select * from car;
insert into accident values(11,'2003-01-03',"MYSORE ROAD");
insert into accident values(12,'2004-02-02',"SOUTH END CIRCLE");
insert into accident values(13,'2003-01-21',"BULL TEMPLE ROAD");
insert into accident values(14,'2008-02-17',"MYSORE ROAD");
insert into accident values(15,'2005-03-04',"KANAKPURA ROAD");
SELECT * FROM ACCIDENT;
insert into owns values("A04","KA477");
insert into owns values("A01","KA250");
insert into owns values("A02","KA408");
insert into owns values("A03","KA181");
insert into owns values("A05","KA702");
insert into PARTICIPATED values("A01","KA250",11,10000);
insert into PARTICIPATED values("A02","KA408",12,50000);
insert into PARTICIPATED values("A03","KA181",13,25000);
insert into PARTICIPATED values("A04","KA477",14,3000);
insert into PARTICIPATED values("A05","KA702",15,5000);
SELECT * FROM PARTICIPATED;
UPDATE participated set damage_amt=25000 where reg_no="KA408" AND report_no=12;
select * from participated;
insert into accident values(16,'2008-03-15',"DOMLUR");
SELECT accident_date,location from accident;
SELECT 
    driver_id
FROM
    participated
WHERE
    damage_amt >= 25000;
select * from car order by year asc;
select count(distinct p.report_no) from participated p,car c where p.reg_no=c.reg_no and c.model="Lancer";
select count(distinct driver_id) from participated p,accident a where p.report_no=a.report_no and a.accident_date like '2008%';
select * from participated order by damage_amt desc;
select avg(damage_amt) from participated;
select distinct pe.name,pa.damage_amt from participated pa,person pe where pa.driver_id=pe.driver_id and pa.damage_amt>(select avg(damage_amt) from participated);
delete from participated where damage_amt<(select avg(damage_amt) from participated);
select max(damage_amt) from participated;
